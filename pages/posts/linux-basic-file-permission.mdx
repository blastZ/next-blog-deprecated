import usePost from '../../hooks/usePost';

export const frontMatter = {
  slug: '/posts/linux-basic-file-permission',
  title: 'Linux 基础之文件权限',
  subTitle: '文件权限是 linux 相当重要的一部分内容，通过本文将了解到 linux 文件的属性，以及权限修改等操作。',
  tags: ['linux'],
  date: '2019/09/25',
  thumb: 'https://res.cloudinary.com/stackbunch/image/upload/w_540,q_auto,c_fill/v1560448899/blog-thumb/ssh-detail_auehbc.jpg',
  published: true
};

export default usePost(frontMatter);

# Linux 基础之文件权限

了解 linux 文件权限，首先需要了解文件的属性，也就是明白以下内容的含义：

```bash
blastzMacPro:next-blog blastz$ ls -la
total 664
drwxr-xr-x   22 blastz  staff     704  9 25 23:11 .
drwx------+  24 blastz  staff     768  9 23 23:21 ..
drwxr-xr-x  623 blastz  staff   19936  9 25 23:11 node_modules
-rw-r--r--    1 blastz  staff  303108  9 25 23:11 package-lock.json
-rw-r--r--    1 blastz  staff    1289  9 25 23:11 package.json
```

## Linux 文件属性

上述内容，从第一条开始分别为：**类型与权限**、**链接数**、**拥有者**、**用户组**、**文件容量**、**修改日期**、**文件名**。

### 1. 第一栏代表的是这个文件的类型与权限

这一栏一共有十个字符，第一个字符代表这个文件的类型。当为 `[d]` 时，表示文件夹，为 `-` 时表示文件，这是最常见的两种类型。除此之外还有
`[l]` 表示链接文件（link file），`[b]` 表示设备文件里面的可供存储的周边设备，`[c]` 表示设备文件里面的串行端口设备（键盘，鼠标等一次性读取设备）。

接下来每三个字符一组，且均为 `[rwx]` 三个参数的组合。其中，`[r]` 表示可读权限（read）、`[w]` 表示可写权限（write）、`[x]` 表示可执行权限（execute），
没有权限则以 `[-]` 表示。

第一组为**文件拥有者（owner）**具备的权限，以上面的 `node_modules` 文件夹为例，用户 blastz 拥有读写执行三种权限。

第二组为**文件所属用户组（group）**具备的权限，同样的对 `node_modules` 所在组中的所有用户，他们拥有可读和可执行权限，但没有可写权限。

第三组为**其他用户（other）**具备的权限，也就是即不是文件拥有者，也不在文件所属组下的用户。可以看到对 `node_modules` 文件夹来说，其他用户拥有可读和可执行权限，但没有可写权限。

### 2. 第二栏表示有多少文件名链接到此节点（inode）

### 3. 第三栏表示这个文件的拥有者

### 4. 第四栏表示这个文件的所属用户组

一个用户可以加入多个组，只要是属于这个组的用户，都拥有第一栏中所属用户组的权限。

### 5. 第五栏表示这个文件的容量大小

文件容量默认以字节（Bytes）显示，通过【`-h`】参数可以转换为易于阅读的单位。

### 6. 第六栏表示这个文件的创建或修改日期

### 7. 第七栏是文件名

如果文件以【`.`】开头，则代表这个文件是隐藏文件，只有通过【`-a`】参数才会显示。

## 修改文件属性与权限

常用的修改命令有三个，分别是：

- chgrp 修改文件所属用户组
- chown 修改文件拥有者
- chmod 修改文件的权限

### 修改所属用户组，chgrp（change group）

修改一个文件的用户组，只要执行 chgrp 命令就可以来，但是修改的组名必须要在 /etc/group 文件中存在才行。

```bash
chgrp users dirname/filename #修改 filename 的所属用户组为 users
chgrp -R users dirname #修改 dirname 及其所有子目录和文件所属用户组为 users
```

/etc/group 文件的内容如下

```bash
certusers:*:29:root,_jabber,_postfix
```

代表的含义是 `组名:组密码:组ID:用户1,用户2,用户3`
